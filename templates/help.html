{% extends "base.html" %}

{% block title %}Ayuda - CuentasClaras{% endblock %}

{% block content %}
<div class="flex h-screen overflow-hidden bg-gray-50">
    <!-- Sidebar Navigation (Desktop) -->
    <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-72 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 -translate-x-full">
        <div class="h-full overflow-y-auto">
            <!-- Header del Sidebar -->
            <div class="sticky top-0 bg-gradient-to-r from-green-600 to-blue-600 p-6 z-10">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold text-white mb-1">ğŸ“š Ayuda</h2>
                        <p class="text-sm text-green-100">GuÃ­a completa</p>
                    </div>
                    <button onclick="toggleSidebar()" class="lg:hidden text-white hover:text-green-100">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="p-4 space-y-1">
                <a href="#introduccion" onclick="navigateTo('introduccion')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸš€</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">IntroducciÃ³n</span>
                </a>
                
                <a href="#crear-deudor" onclick="navigateTo('crear-deudor')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ‘¤</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Crear Deudor</span>
                </a>
                
                <a href="#agregar-deuda" onclick="navigateTo('agregar-deuda')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ’°</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Agregar Deudas</span>
                </a>
                
                <a href="#abonos" onclick="navigateTo('abonos')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ’µ</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Sistema de Abonos</span>
                </a>
                
                <a href="#evidencias" onclick="navigateTo('evidencias')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ“„</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Evidencias de Pago</span>
                </a>
                
                <a href="#cuotas" onclick="navigateTo('cuotas')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ“Š</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Sistema de Cuotas</span>
                </a>
                
                <a href="#historial" onclick="navigateTo('historial')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ“‹</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Historial</span>
                </a>
                
                <a href="#kpis" onclick="navigateTo('kpis')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ“ˆ</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Entender KPIs</span>
                </a>
                
                <a href="#buscador" onclick="navigateTo('buscador')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ”</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Buscador y Filtros</span>
                </a>
                
                <a href="#exportar" onclick="navigateTo('exportar')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">ğŸ“„</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Exportar PDF</span>
                </a>
                
                <a href="#perfil" onclick="navigateTo('perfil')" class="nav-link group flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-green-50 transition-colors">
                    <span class="text-2xl">âš™ï¸</span>
                    <span class="font-medium text-gray-700 group-hover:text-green-600">Configurar Perfil</span>
                </a>
            </nav>

            <!-- Footer del Sidebar -->
            <div class="p-4 mt-auto border-t border-gray-200">
                <div class="flex gap-2">
                    <a href="{{ url_for('main.dashboard') }}" 
                       class="flex-1 text-center bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        Dashboard
                    </a>
                    <a href="{{ url_for('main.index') }}" 
                       class="flex-1 text-center bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        Inicio
                    </a>
                </div>
            </div>
        </div>
    </aside>

    <!-- Overlay para cerrar sidebar en mÃ³vil -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden" onclick="toggleSidebar()"></div>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto">
        <!-- Header con botÃ³n de menÃº mÃ³vil -->
        <div class="sticky top-0 bg-white border-b border-gray-200 z-30 lg:hidden">
            <div class="flex items-center justify-between p-4">
                <h1 class="text-xl font-bold text-gray-900">ğŸ“š Centro de Ayuda</h1>
                <button onclick="toggleSidebar()" class="text-gray-600 hover:text-gray-900">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Content -->
        <div class="max-w-4xl mx-auto p-6 lg:p-8">
            <!-- IntroducciÃ³n -->
            <section id="introduccion" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h1 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸš€</span> IntroducciÃ³n
                    </h1>
                    <div class="prose prose-green max-w-none">
                        <p class="text-gray-700 text-lg mb-4">
                            <strong>CuentasClaras</strong> es una aplicaciÃ³n web diseÃ±ada para ayudarte a gestionar tus prÃ©stamos personales y hacer seguimiento de deudas de manera simple y organizada.
                        </p>
                        <p class="text-gray-700 mb-4">Con CuentasClaras puedes:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                            <li>Registrar personas que te deben dinero</li>
                            <li>Crear y gestionar mÃºltiples deudas por persona</li>
                            <li>Procesar abonos parciales o completos de forma automÃ¡tica</li>
                            <li>Hacer seguimiento de pagos con o sin sistema de cuotas</li>
                            <li>Visualizar estadÃ­sticas y KPIs en tiempo real</li>
                            <li>Revisar el historial completo de todas las operaciones</li>
                            <li>Exportar reportes profesionales en formato PDF</li>
                            <li>Trabajar con mÃºltiples monedas (CLP, USD, BRL)</li>
                        </ul>
                        <div class="bg-gradient-to-r from-green-500 to-blue-500 rounded-lg p-6 text-white">
                            <p class="text-lg font-semibold">ğŸ¯ VersiÃ³n Actual: 1.1.0</p>
                            <p class="text-sm mt-2 text-green-100">Incluye sistema de abonos inteligente y formato mejorado</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Crear Deudor -->
            <section id="crear-deudor" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ‘¤</span> Crear un Deudor
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        Un <strong>deudor</strong> es una persona registrada en el sistema que te debe dinero. Cada deudor puede tener mÃºltiples deudas asociadas a su nombre.
                    </p>
                    
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ“ Pasos para crear un deudor:</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Ve al <strong>Dashboard</strong> desde el menÃº superior</li>
                            <li>Haz clic en el botÃ³n verde <strong>"Agregar Deudor"</strong></li>
                            <li>Completa el formulario:
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-2">
                                    <li><strong>Nombre</strong>: Campo obligatorio (*)</li>
                                    <li><strong>TelÃ©fono</strong>: Opcional - Ãºtil para contactar</li>
                                    <li><strong>Email</strong>: Opcional - para enviar recordatorios</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Agregar"</strong></li>
                        </ol>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg">
                        <p class="text-green-900 text-lg">
                            <strong>ğŸ’¡ Consejo:</strong> Solo el nombre es obligatorio. El telÃ©fono y el email se pueden agregar despuÃ©s editando el deudor.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Agregar Deuda -->
            <section id="agregar-deuda" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ’°</span> Agregar Deudas
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        Una vez que tienes un deudor registrado, puedes agregarle una o mÃ¡s deudas.
                    </p>
                    
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ“ Pasos para agregar una deuda:</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Haz clic en <strong>"Ver Detalles"</strong> de un deudor</li>
                            <li>Presiona el botÃ³n verde <strong>"Agregar Deuda"</strong></li>
                            <li>Completa el formulario:
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-2">
                                    <li><strong>Monto</strong>: Cantidad prestada (obligatorio)</li>
                                    <li><strong>Fecha Inicial</strong>: CuÃ¡ndo se realizÃ³ el prÃ©stamo</li>
                                    <li><strong>Â¿Pago en cuotas?</strong>: Marca si serÃ¡ pagado en cuotas</li>
                                    <li><strong>NÃºmero de Cuotas</strong>: Solo si seleccionaste cuotas</li>
                                    <li><strong>Notas</strong>: Observaciones adicionales (opcional)</li>
                                </ul>
                            </li>
                            <li>Usa los <strong>botones de montos sugeridos</strong> para agregar rÃ¡pido</li>
                            <li>Haz clic en <strong>"Agregar"</strong></li>
                        </ol>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg">
                        <p class="text-yellow-900 text-lg">
                            <strong>âš ï¸ Importante:</strong> Los botones de monto sugerido se ajustan automÃ¡ticamente segÃºn tu moneda configurada (CLP, USD, BRL).
                        </p>
                    </div>
                </div>
            </section>

            <!-- Sistema de Abonos -->
            <section id="abonos" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ’µ</span> Sistema de Abonos
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-semibold px-3 py-1 rounded-full">NUEVO v1.1.0</span>
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        El sistema de abonos te permite registrar pagos parciales o completos a cualquier deuda. El procesamiento inteligente completa automÃ¡ticamente las cuotas cuando el monto del abono lo permite.
                    </p>

                    <div class="bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-indigo-900 text-xl mb-4">ğŸ’¡ Â¿CÃ³mo funciona?</h3>
                        <ul class="space-y-3 text-gray-700 text-lg">
                            <li><strong>Para deudas con cuotas:</strong> El abono se aplica primero a completar la cuota actual. Si el monto es mayor, el sistema completa automÃ¡ticamente las siguientes cuotas y el remanente queda registrado como abono parcial de la prÃ³xima cuota pendiente.</li>
                            <li><strong>Para deudas sin cuotas:</strong> El abono se descuenta directamente del monto total adeudado. Si el abono cubre el total, la deuda se marca automÃ¡ticamente como pagada.</li>
                        </ul>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ“ CÃ³mo agregar un abono:</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Accede al detalle del deudor</li>
                            <li>Ubica la deuda pendiente a la que deseas abonar</li>
                            <li>Haz clic en el botÃ³n Ã­ndigo <strong>"ğŸ’° Agregar Abono"</strong></li>
                            <li>Ingresa el monto que deseas abonar</li>
                            <li>Revisa los tips informativos segÃºn el tipo de deuda</li>
                            <li>Confirma la operaciÃ³n y el sistema procesarÃ¡ el abono automÃ¡ticamente</li>
                        </ol>
                    </div>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ“Š Ejemplos:</h3>
                        <div class="space-y-4 text-gray-700">
                            <div>
                                <p class="font-semibold">Caso 1: Abono parcial</p>
                                <p>Deuda: $12.000 en 3 cuotas ($4.000 c/u) â†’ Abono: $2.000</p>
                                <p class="text-sm text-purple-700 mt-1">âœ“ Resultado: Abono parcial de $2.000 en cuota actual (falta $2.000)</p>
                            </div>
                            <div>
                                <p class="font-semibold">Caso 2: Completa mÃºltiples cuotas</p>
                                <p>Deuda: $12.000 en 3 cuotas â†’ Abono: $10.000</p>
                                <p class="text-sm text-purple-700 mt-1">âœ“ Resultado: 2 cuotas completas + $2.000 de abono en cuota 3</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Evidencias de Pago -->
            <section id="evidencias" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ“„</span> Evidencias de Pago
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        Puedes adjuntar evidencias de pago (comprobantes, capturas de pantalla, etc.) en cualquier momento durante el seguimiento de una deuda.
                    </p>
                    
                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ“ Para adjuntar evidencias:</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Accede al detalle del deudor</li>
                            <li>Ubica la deuda correspondiente</li>
                            <li>Haz clic en el botÃ³n <strong>"Adjuntar Evidencia"</strong></li>
                            <li>Selecciona uno o varios archivos desde tu dispositivo</li>
                            <li>Haz clic en <strong>"Subir Archivos"</strong> para confirmar</li>
                        </ol>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ’¡ Ventajas:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 text-lg">
                            <li><strong>Respaldo:</strong> Evidencia de todos los pagos recibidos</li>
                            <li><strong>OrganizaciÃ³n:</strong> Archivos separados por deuda automÃ¡ticamente</li>
                            <li><strong>Accesibilidad:</strong> Descarga cuando necesites verificar</li>
                            <li><strong>Contador visible:</strong> Ve cuÃ¡ntos documentos tiene cada deuda</li>
                        </ul>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg">
                        <p class="text-yellow-900 text-lg">
                            <strong>âš ï¸ Nota:</strong> Funcionalidad de adjuntos temporalmente deshabilitada en UI, pero disponible en el cÃ³digo.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Sistema de Cuotas -->
            <section id="cuotas" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ“Š</span> Sistema de Cuotas
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        El sistema de cuotas te permite gestionar y hacer seguimiento de deudas que se pagarÃ¡n en partes iguales a lo largo del tiempo.
                    </p>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ”¢ Â¿CÃ³mo funcionan las cuotas?</h3>
                        <ul class="list-disc list-inside space-y-3 text-gray-700 text-lg">
                            <li>El sistema divide automÃ¡ticamente el monto total en partes iguales</li>
                            <li>Visualizas el progreso mediante una barra de estado</li>
                            <li>Puedes marcar cuotas como pagadas una por una</li>
                            <li>El monto restante se calcula y actualiza automÃ¡ticamente</li>
                        </ul>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ“ Ejemplo prÃ¡ctico:</h3>
                        <p class="text-gray-700 text-lg mb-3">
                            Si prestas <strong>$100.000</strong> en <strong>5 cuotas</strong>:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 text-lg ml-4">
                            <li>Cada cuota = $20.000</li>
                            <li>1 cuota pagada â†’ Restante: $80.000</li>
                            <li>2 cuotas pagadas â†’ Restante: $60.000</li>
                            <li>5 cuotas pagadas â†’ Deuda completada automÃ¡ticamente âœ“</li>
                        </ul>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg">
                        <h3 class="font-bold text-green-900 text-xl mb-4">âœ… Pagar cuotas:</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Ve al detalle del deudor</li>
                            <li>Encuentra la deuda con cuotas</li>
                            <li>Haz clic en <strong>"Pagar Cuota"</strong></li>
                            <li>La barra de progreso se actualizarÃ¡ automÃ¡ticamente</li>
                            <li>Cuando pagues la Ãºltima cuota, la deuda se marca como completada</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- Historial -->
            <section id="historial" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ“‹</span> Historial de Movimientos
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        CuentasClaras registra automÃ¡ticamente todas las operaciones que realizas sobre las deudas, creando un historial completo y auditable.
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ“ CÃ³mo acceder al historial:</h3>
                        <ul class="list-disc list-inside space-y-3 text-gray-700 text-lg">
                            <li><strong>Historial por deuda:</strong> Accede al detalle de un deudor y despliega el timeline de cada deuda especÃ­fica</li>
                            <li><strong>Historial general:</strong> Haz clic en "Historial" en el menÃº superior para visualizar todos los movimientos del sistema</li>
                        </ul>
                    </div>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ” Filtros disponibles:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 text-lg">
                            <li>Por deudor especÃ­fico</li>
                            <li>Por tipo de acciÃ³n (creada, editada, abono agregado, cuota pagada, etc.)</li>
                            <li>Por rango de fechas (desde/hasta)</li>
                        </ul>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg">
                        <h3 class="font-bold text-green-900 text-xl mb-4">âœ¨ Tipos de acciones registradas:</h3>
                        <ul class="space-y-2 text-gray-700 text-lg">
                            <li>ğŸ”µ Deuda creada</li>
                            <li>ğŸŸ¡ Deuda editada</li>
                            <li>ğŸ’µ Abono agregado <span class="text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded">NUEVO</span></li>
                            <li>ğŸ”µ Cuota pagada</li>
                            <li>ğŸŸ¢ Deuda pagada completamente</li>
                            <li>ğŸ”´ Deuda eliminada</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- KPIs -->
            <section id="kpis" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ“ˆ</span> Entender los KPIs
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        En la parte superior del Dashboard encontrarÃ¡s 4 indicadores clave (KPIs) que te ofrecen una visiÃ³n general y actualizada de tu situaciÃ³n financiera:
                    </p>

                    <div class="space-y-6">
                        <!-- KPI 1 -->
                        <div class="border-l-4 border-red-500 bg-red-50 p-6 rounded-lg">
                            <h3 class="font-bold text-red-900 text-xl mb-3 flex items-center gap-2">
                                ğŸ”´ Total Por Cobrar
                            </h3>
                            <p class="text-gray-700 text-lg mb-2">
                                <strong>Â¿QuÃ© es?</strong> La suma total de TODAS las deudas registradas en el sistema, independientemente de si han realizado pagos parciales o no.
                            </p>
                            <p class="text-gray-700 text-lg">
                                <strong>Ejemplo:</strong> 3 deudas de $10.000, $20.000 y $30.000 = $60.000
                            </p>
                        </div>

                        <!-- KPI 2 -->
                        <div class="border-l-4 border-green-500 bg-green-50 p-6 rounded-lg">
                            <h3 class="font-bold text-green-900 text-xl mb-3 flex items-center gap-2">
                                ğŸŸ¢ Total Cobrado
                            </h3>
                            <p class="text-gray-700 text-lg mb-2">
                                <strong>Â¿QuÃ© es?</strong> La suma de todo el dinero que ya te han pagado.
                            </p>
                            <p class="text-gray-700 text-lg">
                                <strong>Incluye:</strong> Deudas pagadas + cuotas pagadas + abonos parciales
                            </p>
                        </div>

                        <!-- KPI 3 -->
                        <div class="border-l-4 border-blue-500 bg-blue-50 p-6 rounded-lg">
                            <h3 class="font-bold text-blue-900 text-xl mb-3 flex items-center gap-2">
                                ğŸ”µ Deudores
                            </h3>
                            <p class="text-gray-700 text-lg">
                                <strong>Â¿QuÃ© es?</strong> El nÃºmero total de personas registradas. Un deudor puede tener mÃºltiples deudas.
                            </p>
                        </div>

                        <!-- KPI 4 -->
                        <div class="border-l-4 border-yellow-500 bg-yellow-50 p-6 rounded-lg">
                            <h3 class="font-bold text-yellow-900 text-xl mb-3 flex items-center gap-2">
                                ğŸŸ¡ Deudores Activos
                            </h3>
                            <p class="text-gray-700 text-lg mb-2">
                                <strong>Â¿QuÃ© es?</strong> Deudores que aÃºn tienen deudas pendientes.
                            </p>
                            <p class="text-gray-700 text-lg">
                                <strong>Ejemplo:</strong> 5 deudores, 2 pagaron todo = 3 activos
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Buscador y Filtros -->
            <section id="buscador" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ”</span> Buscador y Filtros
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        El buscador y los filtros te permiten encontrar deudores rÃ¡pidamente y organizar tu lista segÃºn diferentes criterios.
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ” Buscar por Nombre</h3>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700 text-lg">
                            <li>Escribe el nombre del deudor en el campo de bÃºsqueda</li>
                            <li>La bÃºsqueda no distingue mayÃºsculas/minÃºsculas</li>
                            <li>Puedes buscar por nombre parcial</li>
                            <li>Haz clic en <strong>"Aplicar"</strong></li>
                        </ol>
                    </div>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ“Š Opciones de Ordenamiento</h3>
                        <ul class="space-y-2 text-gray-700 text-lg">
                            <li><strong>A-Z:</strong> Orden alfabÃ©tico ascendente</li>
                            <li><strong>Z-A:</strong> Orden alfabÃ©tico descendente</li>
                            <li><strong>Deuda mayor:</strong> Muestra primero quien mÃ¡s debe</li>
                            <li><strong>Deuda menor:</strong> Muestra primero quien menos debe</li>
                        </ul>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg">
                        <p class="text-green-900 text-lg">
                            <strong>ğŸ’¡ Consejo:</strong> Usa el botÃ³n <strong>"Limpiar"</strong> para quitar todos los filtros.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Exportar PDF -->
            <section id="exportar" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">ğŸ“„</span> Exportar a PDF
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        CuentasClaras te permite generar y exportar reportes profesionales en formato PDF con toda la informaciÃ³n de tus deudas.
                    </p>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ“‹ Exportar Deudor Individual</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Ve al detalle de un deudor</li>
                            <li>Haz clic en el botÃ³n morado <strong>"Exportar a PDF"</strong></li>
                            <li>Se descargarÃ¡ un PDF con:
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                    <li>InformaciÃ³n del deudor</li>
                                    <li>Lista completa de sus deudas</li>
                                    <li>Totales y estadÃ­sticas</li>
                                    <li>Marca de agua de seguridad con timestamp</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-purple-900 text-xl mb-4">ğŸ“Š Exportar Reporte Completo</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Desde el Dashboard, haz clic en <strong>"Exportar Todo a PDF"</strong></li>
                            <li>Se generarÃ¡ un reporte con:
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                    <li>Resumen general de todos tus deudores</li>
                                    <li>EstadÃ­sticas globales</li>
                                    <li>Detalle de cada deudor con sus deudas</li>
                                    <li>Fecha y hora del reporte</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg">
                        <p class="text-yellow-900 text-lg">
                            <strong>ğŸ“Œ Nota:</strong> Los PDFs respetan tu configuraciÃ³n de moneda y formato mejorado (sin ceros innecesarios).
                        </p>
                    </div>
                </div>
            </section>

            <!-- Configurar Perfil -->
            <section id="perfil" class="content-section mb-12">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                        <span class="text-4xl">âš™ï¸</span> Configurar tu Perfil
                    </h2>
                    <p class="text-gray-700 text-lg mb-6">
                        Personaliza tu experiencia en CuentasClaras configurando las opciones de tu perfil de usuario.
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                        <h3 class="font-bold text-blue-900 text-xl mb-4">ğŸ’± Cambiar Moneda</h3>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700 text-lg">
                            <li>Ve a <strong>Perfil</strong> desde el menÃº superior</li>
                            <li>Selecciona tu moneda preferida:
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                    <li><strong>CLP:</strong> Peso Chileno ($)</li>
                                    <li><strong>USD:</strong> DÃ³lar Estadounidense ($)</li>
                                    <li><strong>BRL:</strong> Real BrasileÃ±o (R$)</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Actualizar"</strong></li>
                            <li>Todos los montos se mostrarÃ¡n en tu moneda</li>
                        </ol>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg">
                        <p class="text-green-900 text-lg">
                            <strong>ğŸ’¡ Consejo:</strong> Los botones de monto sugerido y formato de nÃºmeros se ajustan automÃ¡ticamente a tu moneda.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Footer de ayuda -->
            <div class="bg-gradient-to-r from-green-500 to-blue-500 rounded-xl p-8 text-center text-white">
                <h3 class="text-2xl font-bold mb-4">Â¿Necesitas mÃ¡s ayuda?</h3>
                <p class="text-lg mb-6">
                    Si tienes dudas adicionales o encuentras algÃºn problema con la aplicaciÃ³n, no dudes en contactarnos.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="{{ url_for('main.dashboard') }}" 
                       class="bg-white hover:bg-gray-100 text-green-600 px-8 py-3 rounded-lg font-bold transition duration-200">
                        Volver al Dashboard
                    </a>
                    <a href="{{ url_for('main.index') }}" 
                       class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-8 py-3 rounded-lg font-bold transition duration-200">
                        Ir al Inicio
                    </a>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
// Toggle sidebar en mÃ³vil
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    sidebar.classList.toggle('-translate-x-full');
    overlay.classList.toggle('hidden');
}

// NavegaciÃ³n entre secciones
function navigateTo(sectionId) {
    // Cerrar sidebar en mÃ³vil
    if (window.innerWidth < 1024) {
        toggleSidebar();
    }
    
    // Actualizar enlaces activos
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('bg-green-100', 'border-l-4', 'border-green-600');
    });
    
    const activeLink = document.querySelector(`a[href="#${sectionId}"]`);
    if (activeLink) {
        activeLink.classList.add('bg-green-100', 'border-l-4', 'border-green-600');
    }
    
    // Scroll suave a la secciÃ³n
    const section = document.getElementById(sectionId);
    if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

// Detectar secciÃ³n visible al hacer scroll
const observerOptions = {
    root: null,
    rootMargin: '-50px 0px -50% 0px',
    threshold: 0
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const sectionId = entry.target.id;
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('bg-green-100', 'border-l-4', 'border-green-600');
            });
            
            const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('bg-green-100', 'border-l-4', 'border-green-600');
            }
        }
    });
}, observerOptions);

// Observar todas las secciones
document.querySelectorAll('.content-section').forEach(section => {
    observer.observe(section);
});

// Marcar secciÃ³n inicial como activa
document.addEventListener('DOMContentLoaded', () => {
    const firstLink = document.querySelector('.nav-link');
    if (firstLink) {
        firstLink.classList.add('bg-green-100', 'border-l-4', 'border-green-600');
    }
});
</script>
{% endblock %}
